# Reflektioner för L2

## Namngivning (kapitel 2)
| **Namn och förklaring**                                                                                     | **Reflektion och regler från Clean Code**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|-------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **createPieChart(data, viewData)** Namn på den publika metoden för att skapa ett cirkeldiagram. Metoden finns i modulens huvudklass.         | **Pick One Word per Context** Ordet `create` används för alla diagram som kan skapas i det publika interfacet, som exempelvis `createBarChart()` och `createLineChart()`. Alla dessa metoder skapar en typ av diagram och är dessutom inom samma kontext. Enligt *Clean Code* är det bäst att välja ett gemensamt ord istället för olika ord med samma betydelse, vilket ger en bättre förståelse för användaren. <br><br> **Use Intention-Revealing Names** Namnet `createPieChart` har en tydlig avsikt, och användaren förstår exakt vad metoden ska göra. Namnet kräver ingen kommentar för att förklara syftet, vilket gör det enklare att förstå koden och hitta framtida buggar. Metoden tar två argument: `data` och `viewData`. Argumentet `data` är ett kort och sammanfattande ord som indikerar att ett dataobjekt ska skickas med. Däremot kan `viewData` vara missvisande. Tanken är att bestämma om `value` ska visas som standard eller i procent, men detta framkommer inte tydligt. Bättre alternativ kan vara `displayTypeForValue`, `howToDisplayValue`, eller `displayValueInPercent` (med ett booleanvärde), vilka förklarar avsikten bättre. |
| **setSize(width, height)** Namn på den publika metoden för att sätta diagrammets storlek. Metoden finns i modulens huvudklass.               | **Use Intention-Revealing Names** Namnet `setSize(width, height)` har en tydlig avsikt, vilket är att sätta storleken på diagrammet. Argumentnamnen `width` och `height` passar bra med metoden och tydliggör vad som ska skickas med. <br><br> **Add Meaningful Context** Namnet kan förbättras för att minska risken för missförstånd. Användaren kan tro att det handlar om canvas-elementet snarare än diagrammet. Ett tydligare namn som `setChartSize(width, height)` kan förbättra meningsfull kontext. **Don't Add Gratuitous Context** Samtidigt är namnet kortfattat och beskriver vad metoden gör i relation till diagrammet. Att lägga till mer information kan göra namnet överflödigt, även om en specifikare namngivning skulle öka tydligheten i vissa sammanhang.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **setTitle(title, font)** Namn på den publika metoden för att sätta titeln av diagrammet. Metoden finns i modulens huvudklass.               | **Method Names** Metoden `setTitle()` använder verbet `set`, vilket indikerar en operation för att sätta eller ändra något, i detta fall titeln på diagrammet.<br><br> **Avoid Disinformation** Metoden undviker missinformation. `set` är ett vanligt verb för att indikera inställning av värden och här används det korrekt för att ange titeln. Ett alternativt namn som `setHeader()` kan orsaka förvirring då "header" ofta förknippas med HTML-elementet `<header>`. Att använda ordet "title" är därför tydligare och undviker potentiella missförstånd.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **clear()** Namn på den publika metoden för att rensa canvasen. Metoden finns i modulens huvudklass.                                         | **Don’t Add Gratuitous Context** `clear()` är ett enkelt men välbekant ord som beskriver exakt vad metoden gör. Utan kontext är det oklart exakt vad som rensas, men i sitt sammanhang har `clear()` en tydlig uppgift. Ett längre namn som `clearCanvas` kan minska tvetydigheten, men enligt regeln att undvika överflödig kontext är namnet kortfattat och funktionellt.<br><br> **Use Searchable Names** `clear` är även ett sökvänligt namn som är lätt att hitta i koden. Dock kan ordet "clear" vara vanligt i flera programmeringsspråk, vilket kan försvåra specifika sökningar.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **DiagramModule** Namn på modulens huvudklass.                                                                                                | **Class Names** `DiagramModule` är ett substantiv som beskriver huvudsyftet med klassen – att fungera som huvudklass för publika metoder och diagram. <br><br>**Pick One Word per Context** Namnet representerar hela kontexten för de publika metoderna, och ordet "Diagram" är lämpligt här. Men eftersom ordet "chart" används för metodnamnen i stället för "diagram" kan detta leda till viss förvirring. För att följa regeln bör ett av orden uteslutas eller bytas ut för att enhetlighet i namngivningen ska upprätthållas.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

Jag har under uppgiftens gång fått se över mina egna brister i namngivning, samt ta del av nya principer och kunskap från Clean Code. Jag har försökt att vara nogrann med att ha namn med en tydlig avsikt, samt att ha en tydligt sammanhang. Just reglerna angående kontext tycker jag kan göra det svårare att välja bra namn. På flera metoder känner jag att dem skulle behöva ha mer kontext i namnet, då de nuvarande namnen är för generiska. Samtidigt anser jag att metoderna finns redan i ett sammanhang, eftersom de ligger i en klass med ett namn som förklarar hela kontextet.

## Funktioner (kapitel 3)

| **Namn och förklaring**                                                                       | **Reflektion och regler från Clean Code**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | **Rader kod** |
| --------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- |
| `drawChart(data, yTitle, xTitle, maxValueForY, numOfYLabels)`<br>Klassen BarChart                                                 | **Command Query Separation**<br>`drawChart` följer denna regel, då den ritar ett diagram utan att returnera något värde till användaren. Genom att följa denna regel har jag kunnat undvika sidoeffekter samt en förbättrad kod.<br><br>**Use Descriptive Names**<br>Namnet är beskrivande, eftersom den antyder exakt vad metoden gör - rita ett diagram. Argument namnen är också till viss del informativa, men kan finnas utrymme för förtydligande av t.ex. data. `chartData` skulle kunna vara ett tydligare namn.                                                                                                                 | 22            |
| `drawChart(data, viewData)` <br>Klassen PieChart                                              | **Prefer Exceptions to Returning Error Codes**<br>I metoden används undantag istället för att returnera felkoder, vilket gör att metoden följer denna regel. Buggar och problem kommer i och med detta att upptäckas direkt.<br><br>**Do One Thing**<br>Tyvärr gör ingen av metoderna här endast en sak, utan har fler olika uppgifter. Detta bryter mot regeln Do One Thing. Metoden `drawChart` sorterar data, beräknar procentandelar, ritar sektorerna i ett cirkeldiagram, samt anropar en annan metod. Därför bör denna långa metod brytas upp i flera mindre funktioner för att uppnå denna regel.                                | 22            |
| `#setXLabels (marginHeight, marginWidth, xLabelName, xLabels, isLineChart)` <br>Klassen Axes  | **Small!**<br>Denna metod gör också flera olika saker, men är dock fokuserad på att hantera etiketterna för x-axeln. Den bryter dock mot denna regel, eftersom den är för stor och har för mycket ansvar. Det är därför bättre att dela upp den i mindre metoder för att förbättra läsbarhet och underhåll.<br><br>**Function Arguments**<br>Metoden tar alldeles för många argument. Enligt Clean Code får högst tre argument tas. En lösning på detta skulle kunna vara att gruppera vissa värden i ett objekt.                                                                                                                        | 23            |
| `drawChart(data, yTitle, xTitle, maxValueForY, numOfYLabels)` <br>Klassen LineChart           | **Small!**<br>Metoden `drawChart` utför även den flera uppgifter, och är för lång. Därför skulle det vara bättre att bryta ut den i flera mindre metoder, som exempelvis `drawPoints`, `validateValues` etc.<br><br>**Don't Repeat Yourself**<br>Det finns en upprepning av kod för att beräkna axlarna. Detta görs två gånger för punkterna och linjerna. Detta bryter i slutändan mot DRY-principen. Därför skulle det vara bättre att skapa en hjälpfunktion som beräknar dessa axlar.                                                                                                                                                | 31            |
| `#setYLabels (marginHeight, marginWidth, yLabel, maxValueForY, yNumOfLabels)`<br>Klassen Axes | **Function Arguments**<br>Återigen tar denna metod emot fem argument, precis som metoden `#setXLabels`. Detta bryter mot antalet rekommenderade argument, och kan tyda på en onödig komplexitet. På grund av detta kan det bli svårare att förstå koden samt läsbarheten minskas. Därför är det smartare att minska antalet argument genom att samla dem i ett objekt.<br><br>**Do One Thing**<br>Denna metod gör inte bara en grej, vilket bryter mot "Do One Thing"-principen. Precis som jag tidigare nämnt angående detta kravet, så är det bra att bryta isär denna metod till flera mindre metoder, som tar sig an en uppgift var. | 18            |

Jag läste detta kapitel efter att jag hade implementerat mina metoder, vilket gjorde att jag fick verkligen se de stora brister som jag hade i min kodkvalitet. Jag har en tendens att skriva för stora metoder, och lägga mycket av funktionaliten på samma ställe, vilket bryter mot Clean Code. Jag är dock noggran med att alltid kasta fel, och inte returnera felkoder. Dock har jag lagt valideringen tillsammans med metoderna, vilket bryter mot flera regler i kapitel 3. Jag vill nu ta med mig de regler och kunskaper jag har fått lära mig av i kapitel 3 i Clean Code och applicera det i min nästa version av denna modul.

## Reflektion kring kodkvalitet

Av någon anledning har jag inte tänkt så mycket på att kod och programmering är språk. De fungerar precis som vanliga språk, som vi pratar i den fysiska världen. För att vi ska kunna komma fram till saker behöver vi kommunicera på ett kvalitativt vis. Under dessa veckor har jag insett hur viktig kommunikationen är inom kod. Innan jag började läsa boken Clean Code, visste jag inte riktigt hur mycket nytt man kan lära sig inom något som man på ett sätt redan vet om. 

Jag har läst kapitel 2 och 3 ur boken Clean Code, och har fått ta del om ny kunskap och nya råd angående kodkvalitet för namn och funktioner. Under denna uppgift har jag fått förstå hur viktigt bra kodkvalitet är för mig själv, för andra och kommunikationen emellan. Jag har använt det jag har lärt mig i modulens implementation. Namn som `createPieChart()` och `setTitle()` har en tydlig avsikt, vilket gör det enklare att använda dessa metoder.

Samtidigt som jag har lärt mig och tagit till mig hur man skriver bra kod, så har jag funnit flera brister i min egen kodkvalitet, som jag kommer behöva fortsätta arbeta på. Små och korta metoder som endast gör en sak, har varit en stor utmaning för min del. Enligt Clean Code är detta en viktig regel, som jag nu framöver vill fullfölja och lära mig efter. I mina metoder har jag blandat både den avsedda logiken med validering, vilket bör separeras. Problemen som kommer med detta är att läsbarheten försämras och det blir svårare att följa med i koden. Därför skulle en tydligare och bättre struktur behövas, samt att jag behöver bryta isär logiken i flera metoder, där flera ansvarsområden tas om hand.

I slutändan har denna resa med diagrammodulen varit lärorik.Via denna uppgift har jag fått träna upp mina kunskaper inom Clean Code, samtidigt som jag har behövt inse att jag fortfarande har mycket kvar att lära mig. 
